{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api/server.js","webpack:///./src/components/abstract-component.js","webpack:///./src/components/abstract-smat-component.js","webpack:///./src/components/catalog.js","webpack:///./src/components/course-card.js","webpack:///./src/components/courses-component.js","webpack:///./src/components/currency-component.js","webpack:///./src/components/filter-component.js","webpack:///./src/components/no-data-component.js","webpack:///./src/const.js","webpack:///./src/controllers/page-controller.js","webpack:///./src/main.js","webpack:///./src/models/course-model.js","webpack:///./src/models/courses-model.js","webpack:///./src/utils/filter.js","webpack:///./src/utils/render.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAwC;;AAES;;AAEjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,qDAAc,yBAAyB,qDAAc;AAC9E;AACA;AACA,GAAG;AACH,uBAAuB,gBAAgB,IAAI,oBAAoB;AAC/D;AACA;;AAEe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA4B,WAAW;AACvC,KAAK;AACL;AACA,0BAA0B,4DAAW;AACrC;;AAEA,SAAS,+DAA+D;AACxE,oBAAoB,eAAe,GAAG,IAAI,IAAI,sBAAsB;AACpE;AACA;AACA;AACA,OAAO;AACP;AACA;;;;;;;;;;;;;AC1CA;AAAA;AAAA;AAA8C;;AAE/B;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,mEAAa;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACxBA;AAAA;AAAA;AAAqD;;AAEtC,qCAAqC,2DAAiB;AACrE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChBA;AAAA;AAAA;AAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,+BAA+B,2DAAiB;AAC/D;AACA;AACA;AACA;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAA+D;AAC7B;;AAElC;AACA;AACA,SAAS,iBAAiB,GAAG,wCAAwC;AACrE,SAAS,cAAc;AACvB;AACA;AACA;AACA,gDAAgD,UAAU;AAC1D,iDAAiD,UAAU;AAC3D;AACA;AACA,oCAAoC,eAAe;AACnD,oCAAoC,OAAO;AAC3C,oCAAoC,aAAa;AACjD;AACA;AACA;AACA;AACA;AACA,gDAAgD,iBAAiB;AACjE;AACA;AACA;AACA;;AAEe,kCAAkC,gEAAsB;AACvE,iCAAiC,+CAAQ;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAqD;;AAErD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGe,+BAA+B,2DAAiB;AAC/D;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGe,gCAAgC,2DAAiB;AAChE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAqD;;AAErD;AACA;AACA,cAAc,MAAM;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,8BAA8B,2DAAiB;AAC9D;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3EA;AAAA;AAAA;AAAA;AAAqD;AACd;;AAEvC;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;;;AAGe,8BAA8B,2DAAiB;AAC9D,uBAAuB,oDAAa;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6D;AACR;AACY;AACF;AACM;AAC1B;AACiB;AACT;AACO;AACI;;AAE/C;AACf;AACA;AACA;AACA,4BAA4B,+CAAQ;AACpC;AACA;AACA,gCAAgC,qEAAe;AAC/C,iCAAiC,2DAAgB;AACjD,kCAAkC,sEAAiB;AACnD,iCAAiC,qEAAgB;AACjD;AACA;AACA;AACA;;AAEA;AACA,IAAI,4DAAM;;AAEV;AACA;AACA;AACA;AACA,oCAAoC,qEAAe,CAAC,oDAAa;AACjE,QAAQ,6DAAO;AACf,OAAO;AACP;;AAEA;AACA;AACA,IAAI,4DAAM;AACV;AACA,kCAAkC,qEAAe,CAAC,oDAAa;AAC/D,MAAM,4DAAM,kDAAkD,yDAAW;AACzE;;AAEA;AACA,qCAAqC,+DAAmB;AACxD;AACA,MAAM,4DAAM;AACZ,KAAK;AACL;;AAEA;AACA,6BAA6B,6DAAY;AACzC,gCAAgC,oEAAe,CAAC,gEAAU;AAC1D,IAAI,4DAAM;AACV,IAAI,4DAAM;AACV,IAAI,4DAAM;AACV,IAAI,4DAAM;;AAEV;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+CAA+C,4DAAM;AACrD;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,+CAAQ;AACvC;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA,wBAAwB,8CAAO;AAC/B;AACA;AACA;AACA;;;;;;;;;;;;;AC/FA;AAAA;AAAA;AAA2D;AACzB;;AAElC;AACA,mBAAmB,mDAAM;;AAEzB,2BAA2B,oEAAc;AACzC;;;;;;;;;;;;;ACPA;AAAA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAA+D;;AAEhD;AACf;AACA;AACA;AACA,OAAO,wDAAU;AACjB,OAAO,wDAAU;AACjB,OAAO,wDAAU;AACjB,OAAO,wDAAU;AACjB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ,0BAA0B,wEAAkB;AAC5C;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","import {ResponseStatus} from \"../const\";\n\nimport CourseModel from \"../models/course-model\";\n\nconst Method = {\n  GET: `GET`,\n  POST: `POST`,\n  PUT: `PUT`,\n  DELETE: `DELETE`\n};\n\nconst checkStatus = (response) => {\n  if (response.status >= ResponseStatus.OK && response.status < ResponseStatus.REDIRECT) {\n  // if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    throw new Error(`${response.status}: ${response.statusText}`);\n  }\n};\n\nexport default class Server {\n  constructor(endPoint) {\n    this._endPoint = endPoint;\n  }\n\n  getCourses() {\n    return this._load({\n      url: `update`,\n      method: Method.POST,\n      body: JSON.stringify({\"data\": ``})\n    })\n      .then((response) => response.json())\n      .then((response) => CourseModel.parseCourses(response.items));\n  }\n\n  _load({url, method = Method.GET, body = null, headers = new Headers()}) {\n    return fetch(`${this._endPoint}/${url}`, {method, body, headers})\n      .then(checkStatus)\n      .catch((err) => {\n        throw err;\n      });\n  }\n}\n","import {createElement} from \"../utils/render\";\n\nexport default class AbstractComponent {\n  constructor() {\n    if (new.target === AbstractComponent) {\n      throw new Error(`Can't instantiate AbstractComponent, only concrete one.`);\n    }\n    this._element = null;\n  }\n\n  getTemplate() {\n    throw new Error(`Abstract method not implemented: getTemplate`);\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n    return this._element;\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n","import AbstractComponent from \"./abstract-component\";\n\nexport default class AbstractSmartComponent extends AbstractComponent {\n  recoveryListeners() {\n    throw new Error(`Abstract method not implemented: recoveryListeners`);\n  }\n\n  rerender() {\n    const oldElement = this.getElement();\n    const parentElement = oldElement.parentElement;\n    this.removeElement();\n\n    const newElement = this.getElement();\n    parentElement.replaceChild(newElement, oldElement);\n    this.recoveryListeners();\n  }\n}\n","import AbstractComponent from \"./abstract-component\";\n\nconst createCatalogTemplate = () => {\n  return (`\n    <section class=\"catalog\">\n      <h2 class=\"visually-hidden\">Каталог</h2>\n    </section>\n  `);\n};\n\nexport default class CatalogComponent extends AbstractComponent {\n  getTemplate() {\n    return createCatalogTemplate();\n  }\n}\n","import AbstractSmartComponent from \"./abstract-smat-component\";\nimport {Currency} from \"../const\";\n\nconst createCardTemplate = (course, currency) => {\n  const grades = course.grades.length > 1\n    ? `${course.grades[0]}-${course.grades[course.grades.length - 1]} классы`\n    : `${course.grades} класс`;\n  return (`\n    <li class=\"courses__item\">\n      <picture>\n        <source type=\"image/webp\" srcset=\"img/${course.id}.webp\">\n        <img class=\"courses__picture\" src=\"img/${course.id}.jpg\" alt=\"Алгебра\">\n      </picture>\n      <div class=\"courses__info\">\n        <p class=\"courses__title\">${course.subject}</p>\n        <p class=\"courses__grade\">${grades}</p>\n        <p class=\"courses__genre\">${course.genre}</p>\n        <p class=\"courses__additional\">\n          <a class=\"courses__additional-link\" href=\"#\">Подробнее</a>\n        </p>\n      </div>\n      <p class=\"courses__buy\">\n        <a class=\"courses__buy-link\" href=\"#\">${course[currency]}</a>\n      </p>\n    </li>\n  `);\n};\n\nexport default class CourseCardComponent extends AbstractSmartComponent {\n  constructor(course, currency = Currency.RUB) {\n    super();\n    this._course = course;\n    this._currency = currency;\n  }\n\n  getTemplate() {\n    return createCardTemplate(this._course, this._currency);\n  }\n\n  setCurrency(currency) {\n    this._currency = currency;\n  }\n\n  recoveryListeners() {\n    // TODO: реализовать, когда будут обработчики событий(на данный момент они не требуются по ТЗ)\n  }\n}\n","import AbstractComponent from \"./abstract-component\";\n\nconst createCoursesTemplate = () => {\n  return (`\n    <div class=\"courses\">\n      <ul class=\"courses__list\">\n        \n      </ul>\n    </div>\n  `);\n};\n\n\nexport default class CoursesComponent extends AbstractComponent {\n  getTemplate() {\n    return createCoursesTemplate();\n  }\n\n  getContainerElement() {\n    return this.getElement().querySelector(`.courses__list`);\n  }\n}\n","import AbstractComponent from \"./abstract-component\";\n\nconst createCurrencyTemplate = () => {\n  return (`\n    <div class=\"catalog__currency\">\n      <input type=\"radio\" id=\"currency-rub\" name=\"currency\" value=\"rub\" checked>\n      <label for=\"currency-rub\">Рубли</label>\n      <input type=\"radio\" id=\"currency-bonus\" name=\"currency\" value=\"bonus\">\n      <label for=\"currency-bonus\">Бонусы</label>\n    </div>  \n  `);\n};\n\n\nexport default class CurrencyComponent extends AbstractComponent {\n  getTemplate() {\n    return createCurrencyTemplate();\n  }\n\n  setChangeHandler(handler) {\n    this.getElement().querySelectorAll(`input[name=currency]`)\n      .forEach((it) => it.addEventListener(`change`, handler));\n  }\n}\n","import AbstractComponent from \"./abstract-component\";\n\nconst createOptionTemplate = (value) => {\n  return (`\n    <option>${value}</option>\n  `);\n};\n\nconst createFilterTemplate = (filters) => {\n  const subjectOptionsTemplate = filters.subjects.map((it) => createOptionTemplate(it)).join(`\\n`);\n  const genresOptionsTemplate = filters.genres.map((it) => createOptionTemplate(it)).join(`\\n`);\n  const gradesOptionsTemplate = filters.grades.map((it) => createOptionTemplate(it)).join(`\\n`);\n  return (`\n    <section class=\"filter\">\n      <h2 class=\"visually-hidden\">Фильтры</h2>\n      <ul class=\"filter__list\">\n        <li class=\"filter__item\">\n          <label for=\"subject\" class=\"visually-hidden\">Выберите предмет</label>\n          <select id=\"subject\" class=\"filter__option input\">\n            ${subjectOptionsTemplate}\n          </select>\n        </li>\n        <li class=\"filter__item\">\n          <label for=\"genre\" class=\"visually-hidden\">Выберите жанр</label>\n          <select id=\"genre\" class=\"filter__option input\">\n            ${genresOptionsTemplate}\n          </select>\n        </li>\n        <li class=\"filter__item\">\n          <label for=\"class\" class=\"visually-hidden\">Выберите класс</label>\n          <select id=\"class\" class=\"filter__option input\">\n            ${gradesOptionsTemplate}\n          </select>\n        </li>\n      </ul>\n      <p class=\"filter__search-container\">\n        <label for=\"search\" class=\"visually-hidden\">Поиск по наименованию</label>\n        <input id=\"search\" class=\"filter__search input\" type=\"text\" placeholder=\"Поиск\">\n        <button class=\"filter__button-find\" title=\"Найти\">Найти</button>\n      </p>\n    </section>\n  `);\n};\n\nexport default class FilterComponent extends AbstractComponent {\n  constructor(filters) {\n    super();\n    this._filters = filters;\n  }\n\n  getTemplate() {\n    return createFilterTemplate(this._filters);\n  }\n\n  setSearchSubmitHandler(handler) {\n    this.getElement().querySelector(`#search`).addEventListener(`keydown`, handler);\n  }\n\n  setSubjectChangeHandler(handler) {\n    this.getElement().querySelector(`#subject`).addEventListener(`change`, handler);\n  }\n\n  setGenreChangeHandler(handler) {\n    this.getElement().querySelector(`#genre`).addEventListener(`change`, handler);\n  }\n\n  setGradeChangeHandler(handler) {\n    this.getElement().querySelector(`#class`).addEventListener(`change`, handler);\n  }\n\n  setFiltersChangeHandlers(handler) {\n    this.setSubjectChangeHandler(handler);\n    this.setGenreChangeHandler(handler);\n    this.setGradeChangeHandler(handler);\n  }\n}\n","import AbstractComponent from \"./abstract-component\";\nimport {NoDataMessage} from \"../const\";\n\nconst createNoDataTemplate = (status) => {\n  return (`\n    <h2 class=\"page-main__no-data\">${status}</h2>\n  `);\n};\n\n\nexport default class NoDataComponent extends AbstractComponent {\n  constructor(status = NoDataMessage.LOADING) {\n    super();\n    this._status = status;\n  }\n\n  getTemplate() {\n    return createNoDataTemplate(this._status);\n  }\n}\n","export const Currency = {\n  RUB: `price`,\n  BONUS: `priceBonus`,\n};\n\nexport const KeyCode = {\n  ENTER: 13,\n};\n\nexport const NoDataMessage = {\n  LOADING: `Данные загружаются...`,\n  ERROR: `Не получилось загрузить данные. Попробуйте позднее`,\n  NOT_FIND: `Результаты поиска: Курсы не найдены`,\n};\n\nexport const ResponseStatus = {\n  OK: 200,\n  REDIRECT: 300\n};\n","import FilterComponent from \"../components/filter-component\";\nimport CatalogComponent from \"../components/catalog\";\nimport CurrencyComponent from \"../components/currency-component\";\nimport CoursesComponent from \"../components/courses-component\";\nimport {PlaceInsert, remove, render, replace} from \"../utils/render\";\nimport {getFilters} from \"../utils/filter\";\nimport CourseCardComponent from \"../components/course-card\";\nimport CoursesModel from \"../models/courses-model\";\nimport {Currency, KeyCode, NoDataMessage} from \"../const\";\nimport NoDataComponent from \"../components/no-data-component\";\n\nexport default class PageController {\n  constructor(api) {\n    this._api = api;\n    this._displayedCourses = [];\n    this._currentCurrency = Currency.RUB;\n    this._siteMainElement = document.querySelector(`.page-main`);\n    this._coursesListElement = null;\n    this._noDataComponent = new NoDataComponent();\n    this._catalogComponent = new CatalogComponent();\n    this._currencyComponent = new CurrencyComponent();\n    this._coursesComponent = new CoursesComponent();\n    this._onFilterChange = this._onFilterChange.bind(this);\n    this._onSearchSubmit = this._onSearchSubmit.bind(this);\n    this._onCurrencyChange = this._onCurrencyChange.bind(this);\n  }\n\n  render() {\n    render(this._siteMainElement, this._noDataComponent);\n\n    this._api.getCourses()\n      .then((courses) => this._renderAfterAcceptData(courses))\n      .catch(() => {\n        const oldComponent = this._noDataComponent;\n        this._noDataComponent = new NoDataComponent(NoDataMessage.ERROR);\n        replace(this._noDataComponent, oldComponent);\n      });\n  }\n\n  _renderCourses() {\n    const courses = this._coursesModel.getCourses();\n    remove(this._noDataComponent);\n    if (courses.length === 0) {\n      this._noDataComponent = new NoDataComponent(NoDataMessage.NOT_FIND);\n      render(this._coursesListElement, this._noDataComponent, PlaceInsert.BEFORE_BEGIN);\n    }\n\n    courses.forEach((it) => {\n      const newCourseComponent = new CourseCardComponent(it, this._currentCurrency);\n      this._displayedCourses.push(newCourseComponent);\n      render(this._coursesListElement, newCourseComponent);\n    });\n  }\n\n  _renderAfterAcceptData(courses) {\n    this._coursesModel = new CoursesModel(courses);\n    this._filterComponent = new FilterComponent(getFilters(courses));\n    render(this._siteMainElement, this._filterComponent);\n    render(this._siteMainElement, this._catalogComponent);\n    render(this._siteMainElement, this._currencyComponent);\n    render(this._siteMainElement, this._coursesComponent);\n\n    this._coursesListElement = this._coursesComponent.getContainerElement();\n    this._renderCourses();\n\n    this._filterComponent.setFiltersChangeHandlers(this._onFilterChange);\n    this._filterComponent.setSearchSubmitHandler(this._onSearchSubmit);\n    this._currencyComponent.setChangeHandler(this._onCurrencyChange);\n  }\n\n  _setFilterAndRerender(filterType, value) {\n    this._coursesModel.setFilter(filterType, value);\n    this._displayedCourses.forEach((course) => remove(course));\n    this._displayedCourses = [];\n    this._renderCourses();\n  }\n\n  _onCurrencyChange(evt) {\n    this._displayedCourses.forEach((course) => {\n      const selectedCurrency = Currency[evt.target.value.toUpperCase()];\n      this._currentCurrency = selectedCurrency;\n      course.setCurrency(selectedCurrency);\n      course.rerender();\n    });\n  }\n\n  _onFilterChange(evt) {\n    this._setFilterAndRerender(evt.target.id, evt.target.value);\n  }\n\n  _onSearchSubmit(evt) {\n    if (evt.keyCode === KeyCode.ENTER) {\n      this._setFilterAndRerender(evt.target.id, evt.target.value);\n    }\n  }\n}\n","import PageController from \"./controllers/page-controller\";\nimport Server from \"./api/server\";\n\nconst END_POINT = `http://krapipl.imumk.ru:8082/api/mobilev1`;\nconst server = new Server(END_POINT);\n\nconst pageController = new PageController(server);\npageController.render();\n","export default class CourseModel {\n  constructor(data) {\n    this.id = data[`courseId`];\n    this.idExtend = data[`extId`];\n    this.courseHash = data[`courseHash`];\n    this.title = data[`title`];\n    this.grades = data[`grade`].split(`;`);\n    this.genre = data[`genre`];\n    this.subject = data[`subject`];\n    this.idItunes = data[`itunes_id`];\n    this.progress = data[`progress`];\n    this.description = data[`description`];\n    this.status = data[`status`];\n    this.price = data[`price`];\n    this.idGoogle = data[`google_id`];\n    this.isNew = data[`isNew`];\n    this.priceBonus = data[`priceBonus`];\n  }\n\n  static parseCourse(data) {\n    return new CourseModel(data);\n  }\n\n  static parseCourses(data) {\n    return data.map(CourseModel.parseCourse);\n  }\n}\n","import {FilterType, getCoursesByFilter} from \"../utils/filter\";\n\nexport default class CoursesModel {\n  constructor(courses) {\n    this._courses = courses;\n    this._activeFilters = {\n      [FilterType.SUBJECT]: `все `,\n      [FilterType.GENRE]: `все `,\n      [FilterType.GRADE]: `все `,\n      [FilterType.SEARCH]: `все `,\n    };\n  }\n\n  setFilter(filterType, filterValue) {\n    this._activeFilters[filterType] = filterValue;\n  }\n\n  getCourses() {\n    let filteredCourses = this._courses;\n    for (let key in this._activeFilters) {\n      if ({}.hasOwnProperty.call(this._activeFilters, key)) {\n        filteredCourses = getCoursesByFilter(filteredCourses, key, this._activeFilters[key]);\n      }\n    }\n    return filteredCourses;\n  }\n}\n","export const getFilters = (courses) => {\n  const subjects = new Set();\n  const genres = new Set();\n  const grades = new Set();\n\n  courses.forEach((it) => {\n    subjects.add(it.subject);\n    genres.add(it.genre);\n    it.grades.forEach((grade) => grades.add(grade));\n  });\n\n  const filters = {\n    subjects: Array.from(subjects).sort(),\n    genres: Array.from(genres).sort(),\n    grades: Array.from(grades).sort((a, b) => a - b),\n  };\n\n  filters.subjects.unshift(`Все предметы`);\n  filters.genres.unshift(`Все жанры`);\n  filters.grades.unshift(`Все классы`);\n\n  return filters;\n};\n\nexport const FilterType = {\n  SUBJECT: `subject`,\n  GENRE: `genre`,\n  GRADE: `class`,\n  SEARCH: `search`,\n};\n\nexport const getCoursesByFilter = (courses, filterType, filterValue) => {\n  if (filterValue.toLowerCase().startsWith(`все `) || filterValue === ``) {\n    return courses;\n  }\n\n  switch (filterType) {\n    case FilterType.SUBJECT:\n      return courses.filter((it) => it.subject === filterValue);\n    case FilterType.GENRE:\n      return courses.filter((it) => it.genre === filterValue);\n    case FilterType.GRADE:\n      return courses.filter((it) => it.grades.includes(filterValue));\n    case FilterType.SEARCH:\n      const searchString = filterValue.toLowerCase();\n      return courses.filter((it) => it.title.toLowerCase().includes(searchString));\n    default:\n      return courses;\n  }\n};\n","export const createElement = (template) => {\n  const newElement = document.createElement(`div`);\n  newElement.innerHTML = template;\n  return newElement.firstElementChild;\n};\n\nexport const PlaceInsert = {\n  BEFORE_BEGIN: `beforebegin`,\n  AFTER_BEGIN: `afterbegin`,\n  BEFORE_END: `beforeend`,\n  AFTER_END: `afterend`,\n};\nexport const render = (container, component, place = PlaceInsert.BEFORE_END) => {\n  switch (place) {\n    case PlaceInsert.BEFORE_BEGIN:\n      container.parentNode.prepend(component.getElement());\n      break;\n    case PlaceInsert.AFTER_BEGIN:\n      container.prepend(component.getElement());\n      break;\n    case PlaceInsert.BEFORE_END:\n      container.append(component.getElement());\n      break;\n    case PlaceInsert.AFTER_END:\n      container.parentNode.append(component.getElement());\n      break;\n  }\n};\n\nexport const remove = (component) => {\n  component.getElement().remove();\n  component.removeElement();\n};\n\nexport const replace = (newComponent, oldComponent) => {\n  const parentElement = oldComponent.getElement().parentElement;\n  const newElement = newComponent.getElement();\n  const oldElement = oldComponent.getElement();\n\n  if (parentElement.contains(oldElement)) {\n    parentElement.replaceChild(newElement, oldElement);\n  }\n};\n"],"sourceRoot":""}